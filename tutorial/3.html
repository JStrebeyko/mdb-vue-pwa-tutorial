<!--Section: Tutorial content-->
<section class="tutorial">
  <section id="app-view">

    <!--Title-->
    <h2 class="title mb-4">
      <strong>Making an app installable</strong>
    </h2>

    <p class="description">
      One of the most powerful functions that PWA offers is the ability to add our web app to a device's home screen.
      This single feature fills the big gap between native and web apps, allowing for the latter to look and feel the "native" way.
    </p>

    <p class="description">Surprisingly, <strong>it doesn't require a lot of work</strong>. We will cover everything in the upcoming lessons.</p>

    <p class="description">What it all boils down to is presenting the users with the sole ability of installing our app. It takes form of an App Install Banner - a simple browser dialog. According to <a
        href="https://developers.google.com/web/fundamentals/app-install-banners/">the official documentation</a>,
      are only a few requirements:</p>
    <ul>
      <li>The web app is not already installed</li>
      <li>the user has interacted with the domain for at least 30 seconds</li>
      <li>codebase includes a web app manifest</li>
      <li>App is served over HTTPS</li>
      <li>Has registered a service worker with a fetch event handler (currently necessary for Chrome on Android only)
      </li>
    </ul>

    <p>Of course the two first are beyond our control. As a developer, you have to take care of the last three.
      Let's begin with the app manifest.</p>

    <h3 class="mt-5"><strong>What is an app manifest?</strong></h3>

    <p>App manifest is a simple JSON file, describing some of the properties the app has to have defined to utilize the PWA charm. In that, the file resembles an App Store description of a native app. It is possible that you have already    stumbled up it in some other projects' directories, definitely in ones created using <code>vue-cli</code> or <code>create-react-app</code> boilerplate systems.</p>

    <p>Minimal <code>manifest.json</code> includes:</p>
    <ul>
      <li><code>name</code> and <code>short_name</code> - either one. If both are provided, <code>short_name</code> is
        used on the user's home screen, launcher, or other places where space may be limited. <code>name</code> is used
        in the app install prompt.</li>
      <li><code>icons</code> - an array of objects represening images, each with its <code>src</code>, <code>size</code>
        and <code>type</code> fields. Must include a 192px and a 512px sized icons. Chrome will automatically scale the
        icon for the device. If you'd prefer to scale your own icons and adjust them for pixel-perfection, provide icons
        in increments of 48dp</li>
      <li><code>start_url</code> - tells the browser where your application should start when it is launched, and
        prevents the app from starting on whatever page the user was on when they added your app to their home screen.
        Add a query string to the end of the start_url to track how often your installed app is launched</li>
      <mdbsnippet>
        <code data-lang="js" data-name="public/manifest.json">
          "start_url": "/?utm_source=homescreen",
        </code>
      </mdbsnippet>
      <li><code>display</code></li> must be one of: <code>fullscreen</code>, <code>standalone</code>, or
      <code>minimal-ui</code>
    </ul>

    <p>A full list of the supported properties which can be used is found <a
        href="https://developer.mozilla.org/en-US/docs/Web/Manifest">here</a>.</p>

    <p>
      All right! Now, armed with the necessary theoretical background, let's create a
      <code>manifest</code> on our own! Let's place it in the project's <code>/static</code> directory, hinting that we
      want to keep it as it is (static) rather than somehow process it, as we do with <code>.vue</code> files, for
      example.
    </p>

    <mdbsnippet>
      <code data-lang="js" data-name="static/manifest.json">
        {
        "short_name": "Agenda App",
        "name": "MDBootstrap Agenda App Demo",
        "icons": [
        {
        "src": "icons/icon-36.png",
        "sizes": "36x36",
        "type": "image/png"
        },
        {
        "src": "icons/icon-48.png",
        "sizes": "48x48",
        "type": "image/png"
        },
        {
        "src": "icons/icon-72.png",
        "sizes": "72x72",
        "type": "image/png"
        },
        {
        "src": "icons/icon-96.png",
        "sizes": "96x96",
        "type": "image/png"
        },
        {
        "src": "icons/icon-120.png",
        "sizes": "120x120",
        "type": "image/png"
        },
        {
        "src": "icons/icon-144.png",
        "sizes": "144x144",
        "type": "image/png"
        },
        {
        "src": "icons/icon-152.png",
        "sizes": "152x152",
        "type": "image/png"
        },
        {
        "src": "icons/icon-167.png",
        "sizes": "167x167",
        "type": "image/png"
        },
        {
        "src": "icons/icon-180.png",
        "sizes": "180x180",
        "type": "image/png"
        },
        {
        "src": "icons/icon-192.png",
        "sizes": "192x192",
        "type": "image/png"
        },
        {
        "src": "icons/icon-512x512.png",
        "sizes": "512x512",
        "type": "image/png"
        }
        ],
        "start_url": "./index.html",
        "display": "standalone",
        "background_color": "#000000",
        "theme_color": "#4DBA87"
        }
      </code>
    </mdbsnippet>

    <h3 class="title mb-4">manifest.json - icons</h3>

    <p>
      As you can see, the JSON file are referencing a number of images of different sizes we do not have yet. Why? There
      is a world of
      screens waiting for our PWA to get installed, most of them have their own size and pixel density. To be able to
      cover that means preparing these images up front and including them into our web manifest and let the app do the
      rest regarding picking a proper picture for viewing.
    </p>

    <blockquote class="blockquote bq-danger my-2">
      <p class="bq-title">Note!</p>
      <p>I am mentioning all the different sizes to illustrate the possible pixel-perfect coverage purposes, which exceeds
        beyond a minimal manifest example. To satisfy Lighthouse PWA Audit, which is an important benchmark (more on that in the upcoming lesson) you may want to start off small. In that case, I'd suggest beginning with a 192x192px and and 512x512px-sized icons.</p>
    </blockquote>

    <p>
      So, why all the icons? Let's break the list down. The <code>36x36</code>, <code>48x48</code>, <code>72x72</code>, <code>96x96</code>,
      <code>144x144</code> and
      <code>192x192</code> pixels icons are optimized to be used on the Android platform; folks at Google made sure
      these sizes would play well without getting pixelated or blurry. To cover all the Andoroid needs, what we need is
      also a <code>512x512</code> - it's used for the splash-screens.
    </p>

    <p>
      The sizes of icons for iOS platform are: <code>120x120</code>, <code>152x152</code>, <code>167x167</code> and
      <code>180x180</code> pixels. It's the last one that covers the most current iOS guidelines - the others are
      included for backward compatibility reasons. The last size you might need, <code>1024x1024</code>, is used in the
      Apple App Store. Even though not many PWAs end up there, a large square icon might turn out handy, as it can
      always get scaled down by the plarform.
    </p>

    <p>
      There are many online tools that take your image and help you resize it, so you end up with a set necessary for a
      PWA. You may want to <a href="http://letmegooglethat.com/?q=pwa+icon+generator">research</a> your favorite one, or let us provide you with a <a href="TODO">zip</a> so you don't have to. Add the (unzipped) icons folder into the
      <code>static/</code> directory. You'd like to have your own icon, but you do not know where to start? When it
      comes to the very design, you should follow the same best practices you'd follow for <a
        href="https://material.io/design/iconography/#icon-treatments">any Android icon</a>.</p>

    <h3 class="mt-5"><strong>Linking the manifest up</strong></h3>

    <p>We are almost done here - the only thing that's left is actually letting the browser know the manifest is on board by including our manifest into the
      <code>head</code> tag of our HTML.</p>

    <mdbsnippet>
      <code data-lang="html" data-name="./index.html">
        <head>
          <meta charset="utf-8">
          ...
          <link rel="manifest" href="static/manifest.json" />
        </head>
      </code>
    </mdbsnippet>

    <p>
      After running <code>yarn build</code> or <code>yarn deploy</code>, you should see the an
      inner <code>/static</code> folder being created <em>inside</em> the <code>/dist</code> directory, being an exact copy of the original, root instance of the folder. Having the folder structure copied means the relative route, embedded explicitly in our HTML, stays the same, while the rest of the project gets prepared for a deploy.
    </p>

    <p>
      To see whether everything works, simply <code>yarn dev</code> the project and refer to the devtools console. All
      the possible problems with icon availability, caused by either a file mis-naming, improper JSON formatting, or
      whatever else, should be listed there. For more holistic approach towards testing the PWA-readiness of our
      app, stick with us for an upcoming lesson regarding the audit.
    </p>

    <p>In the next lesson, we will take care of the two other points on our criteria list - HTTPS and service worker.
    </p>

    <p class="description">Something doesn't work for you? Then check the code for this lesson on our <a
        href="https://github.com/mdbootstrap/React-Tutorial-PWA/archive/master.zip">repository</a>!</p>

  </section>
</section>
<!--Section: Tutorial content